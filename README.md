# SFlash - ì§€ë„ SNS ì„œë¹„ìŠ¤ ğŸ“¸âœ¨
[![bg-3.png](https://i.postimg.cc/rsYZfRbT/bg-3.png)](https://postimg.cc/V0nF6vmZ)
<br>

<p align="center">
  <img src="https://img.shields.io/badge/Java-007396?style=flat-square&logo=Java&logoColor=white"/>
  <img src="https://img.shields.io/badge/SpringBoot-6DB33F?style=flat-square&logo=Spring&logoColor=white"/>
  <img src="https://img.shields.io/badge/HTML-E34F26?style=flat-square&logo=html5&logoColor=white"/>
  <img src="https://img.shields.io/badge/CSS-1572B6?style=flat-square&logo=css3&logoColor=white"/>
  <img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=react&logoColor=white"/><br>
  <img src="https://img.shields.io/badge/Json_Web_Tokens-000000?style=flat-square&logo=Json-Web-Tokens&logoColor=white"/>
  <img src="https://img.shields.io/badge/AmazonS3-569A31?style=flat-square&logo=amazon-s3&logoColor=white"/>
  <img src="https://img.shields.io/badge/aws-232F3E?style=flat-square&logo=amazon-aws&logoColor=white"/>
  <img src="https://img.shields.io/badge/MariaDB-003545?style=flat-square&logo=MariaDB&logoColor=white"/>
  <img src="https://img.shields.io/badge/Travis_CI-3EAAAF?style=flat-square&logo=Travis-CI&logoColor=white"/>
  <img src="https://img.shields.io/badge/Gradle-02303A?style=flat-square&logo=Gradle&logoColor=white"/>
  
</p>

# [ğŸ  HOME PAGE](https://www.sflash.net/)<br>
# [ğŸ“ºí”„ë¡œì íŠ¸ ì‹œì—° ì˜ìƒ](https://youtu.be/UdnDlwT31Xk)<br>
## ğŸ’¡ í”„ë¡œì íŠ¸ ì†Œê°œ
ì‚¬ëŒë“¤ì€ ì•Œê³  ë‚˜ë§Œ ëª¨ë¥´ëŠ” ìŠ¤íŒŸë“¤â€¦
ëŒ€ì²´ ê±°ê¸°ê°€ ì–´ë””ì•¼? ë¸”ë¡œê·¸, ì¸ìŠ¤íƒ€ ê²€ìƒ‰ ì´ì œ ê·¸ë§Œ!!
SFlash(Spot + Flash)ëŠ” ì „êµ­ì˜ ëª…ì†Œë“¤ì„ ì‚¬ì§„ê³¼ ì§€ë„ë¡œ í•œëˆˆì— ë³¼ìˆ˜ ìˆë„ë¡ ê¸°íší•œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤.
<br>

#### ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ íŒ€ì›
* Frontend : í—ˆë¯¼ê·œ, ê¹€ë‹¤ì˜, ê¹€í˜•ë¯¼ `React`
* Backend : ì¥í˜„ì¤€, ê¹€ìŠ¹ìš±, ì´ì„¸ì • `SpringBoot`
* Designer : ì†¡ì€ì •, ì„ì•„í˜„

#### ğŸ“… ì§„í–‰ ê¸°ê°„
* 21.04.23(ê¸ˆ) - 21.05.28(ê¸ˆ)

#### âœ ê¸°íš ë°°ê²½
* ì›í•˜ëŠ” ì¥ì†Œë¥¼ ì°¾ê¸° ìœ„í•´ ì¸ìŠ¤íƒ€ê·¸ë¨, ë¸”ë¡œê·¸ ê²€ìƒ‰ í›„ í•´ë‹¹ ì¥ì†Œì˜ ì •í™•í•œ ìœ„ì¹˜ë¥¼ ì°¾ê¸° ìœ„í•´ ì§€ë„ë¡œ ê²€ìƒ‰ì„ í•´ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ ë°œìƒ
* ì‚¬ìš©ìë“¤ì´ ì›í•˜ëŠ” ìŠ¤íŒŸ ì •ë³´ë¥¼ ì§€ë„ì™€ ì‚¬ì§„ìœ¼ë¡œ í•œ ëˆˆì— ë³¼ ìˆ˜ ìˆë„ë¡ ê¸°íš
<br>


## ğŸ’¡ ê°œë°œ í™˜ê²½
* `Java 8`
* `JDK 1.8.0`
* IDE : `IntelliJ`
* Framework : `SpringBoot`
* Build Tools : `Gradle`
* Server : `Amazon EC2 Ubuntu`
* Database : `Amazon RDS MariaDB`
* File Storage: `AWS S3 Bucket`
* CI/CD : `Travis`, `codedeploy`,`s3`
<br>

## ğŸ’¡ ì „ì²´ êµ¬ì¡°
![](https://user-images.githubusercontent.com/55679927/119793545-a778e780-bf11-11eb-946e-581fd2063913.jpeg)


## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥







| [ë¡œê·¸ì¸/íšŒì›ê°€ì…](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#-sflash-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EB%A1%9C%EA%B7%B8%EC%9D%B8-jwt-%EC%A0%95%EB%A6%AC) | [ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#-%EC%9D%B4%EB%A9%94%EC%9D%BC%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%B0%BE%EA%B8%B0) | [ì†Œì…œ ë¡œê·¸ì¸](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#-oauth2-%EC%86%8C%EC%85%9C%EB%A1%9C%EA%B7%B8%EC%9D%B8) | [ê²Œì‹œê¸€ CRUD](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C/_edit#%EA%B2%8C%EC%8B%9C%EA%B8%80-%EC%9E%91%EC%84%B1) | [ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#%EB%8B%A4%EC%A4%91-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C) |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| [![2021-05-31-4-54-56.png](https://i.postimg.cc/qBspRJK7/2021-05-31-4-54-56.png )](https://postimg.cc/gr2CtPN9) | [![2021-05-31-4-56-35.png](https://i.postimg.cc/DwD96HGD/2021-05-31-4-56-35.png )](https://postimg.cc/G4FghMqJ) | ![2021-05-31-4-54-56.png](https://i.postimg.cc/qBspRJK7/2021-05-31-4-54-56.png ) | [![2021-05-31-4-58-55.png](https://i.postimg.cc/qq3ht98T/2021-05-31-4-58-55.png)](https://postimg.cc/N2QfSCJJ) | [![2021-05-31-5-00-07.png](https://i.postimg.cc/g2DssB7p/2021-05-31-5-00-07.png )](https://postimg.cc/Wdd0bSjY) |
| [**ëŒ“ê¸€CRUD**](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#%EB%8C%93%EA%B8%80crud) | [**ì¢‹ì•„ìš”**](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#%EC%A2%8B%EC%95%84%EC%9A%94) | [**í”„ë¡œí•„ í¸ì§‘**](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#-%EB%A7%88%EC%9D%B4%ED%8E%98%EC%9D%B4%EC%A7%80) | [**ë¬¸ì˜í•˜ê¸° CRUD**](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#-%EB%AC%B8%EC%9D%98%ED%95%98%EA%B8%B0-%EA%B2%8C%EC%8B%9C%ED%8C%90) | [**ë¬¸ì˜í•˜ê¸° ë‹µë³€ CRUD**](https://github.com/JangHyeonJun2/picturespot/wiki/%EC%A3%BC%EC%9A%94-%EA%B8%B0%EB%8A%A5-%EC%86%8C%EA%B0%9C#%EB%8C%93%EA%B8%80) |
| [![2021-05-31-5-01-11.png](https://i.postimg.cc/vZ37fx1H/2021-05-31-5-01-11.png )](https://postimg.cc/3k0DHRCP) | [![2021-05-31-5-02-05.png](https://i.postimg.cc/tTPVSsg6/2021-05-31-5-02-05.png )](https://postimg.cc/r0VmzFxy) | [![2021-05-31-5-02-55.png](https://i.postimg.cc/hGQJvXTY/2021-05-31-5-02-55.png)](https://postimg.cc/Y4k2yqXN) | [![2021-05-31-5-03-42.png](https://i.postimg.cc/6pg3kBgf/2021-05-31-5-03-42.png )](https://postimg.cc/0zGPm18z) | [![2021-05-31-5-04-38.png](https://i.postimg.cc/SRSN6RYk/2021-05-31-5-04-38.png )](https://postimg.cc/BLz0sqCV) |

<br>

# ğŸ“Œ [ê¸°ìˆ  ë° í”„ë¡œì íŠ¸ ì •ë¦¬ - WIKI](https://github.com/JangHyeonJun2/picturespot/wiki)
<br>
<br>
<br>


# ë¬¸ì œë°œìƒ ë° í•´ê²°

### /map(GetMapping), /board(GetMapping) APIí˜¸ì¶œ í•  ë•Œ ì‹œê°„ ìµœì í™” í•˜ê¸° ìœ„í•œ ë…¸ë ¥

- /map, /boardë¥¼ í˜¸ì¶œì‹œ Board,User,Heart,BoardImgUrlì— ëŒ€í•œ ì •ë³´ë¥¼ í•œë²ˆì— ë³´ë‚´ì£¼ì–´ì•¼í•œë‹¤. ì²˜ìŒ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„ë¥¼ í•˜ì˜€ì„ ë•ŒëŠ” ë°˜ë³µë¬¸ìœ¼ë¡œ DBë¥¼ ì¡°íšŒë¥¼ í•˜ì˜€ì§€ë§Œ N + 1ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ê³ , ë°ì´í„°ê°€ ë§ì•„ ì§ˆ ìˆ˜ë¡ ì¡°íšŒì‹œê°„ë„ ë”ìš± ëŠë¦¬ê²Œ ë˜ì—ˆë‹¤. ê·¸ë˜ì„œ í•œë²ˆ ì¡°íšŒë¥¼ í•  ë•Œ User,Heart,ImgUrlë¥¼ ë‹¤ ì¡°íšŒí•˜ëŠ” í˜ì¹˜ì¡°ì¸ì„ ì‚¬ìš©í•˜ì˜€ë‹¤. ê·¸ ê²°ê³¼ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ì‹œê°„ì„ ì¶•ì†Œ ì‹œì¼°ìŠµë‹ˆë‹¤.
  [![2021-05-31-8-31-59.png](https://i.postimg.cc/J7Bjh4jv/2021-05-31-8-31-59.png  )](https://postimg.cc/9zCD828Y)

### ë¬´ì¤‘ë‹¨ CI/CD

- FileZilaë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°°í¬ ì‹œê°„ë¹„ìš©ì´ ì˜¤ë˜ ê±¸ë ¸ê³ , ë°°í¬ë¥¼ í•˜ëŠ” ê³¼ì •ì—ì„œ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶°ì•¼í•˜ëŠ” ë¶ˆìƒì‚¬ê°€ ë‚˜ë²„ë¦¬ëŠ” ì¹˜ëª…ì ì¸ ë‹¨ì ì´ ìˆë‹¤. ê·¸ë˜ì„œ ê¹ƒí—™ì—ì„œ ë¬´ë£Œì œê³µì¤‘ì¸ travisì™€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼ ë°°í¬ê³¼ì •ì—ì„œì˜ ì‹œê°„ë¹„ìš©ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆì—ˆê³  ë°°í¬ê°€ ë˜ë”ë¼ë„ ì„œë¹„ìŠ¤ëŠ” ë©ˆì¶”ì§€ì•ŠëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

  [![2021-05-31-8-36-50.png](https://i.postimg.cc/qRwShxfB/2021-05-31-8-36-50.png)](https://postimg.cc/ph9q38X3)

### ì œ1ì •ê·œí˜• ìœ„ë°°

- ì²˜ìŒ ì„¤ê³„ë¥¼ í•˜ì˜€ì„ ë•ŒëŠ” ë©”ëª¨ë¦¬ DBì¸ H2ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.ê·¸ë¦¬ê³  ì—”í‹°í‹° ì„¤ê³„ë¥¼ í•œ ì»¬ëŸ¼ì— ë°ì´í„°ê°€ 2ê°œë„ ë„£ì„ ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. ì¦‰, í•˜ë‚˜ì˜ ê²Œì‹œê¸€ì— ì´ë¯¸ì§€ê°€ 1ê°œì´ìƒì¸ë° ë§Œì•½ ì´ë¯¸ì§€ê°€ 2ê°œì¼ ë•Œ í•˜ë‚˜ì˜ ì»¬ëŸ¼ì— ImgUrlì´ 2ê°œê°€ ìˆëŠ”ê²ƒì´ë‹¤. ê·¼ë° H2ëŠ” ì´ê±¸ ì—ëŸ¬ë¥¼ ë„ìš°ì§€ ì•Šì•˜ë‹¤. ê·¸ë˜ì„œ ì¤‘ë°˜(?)ê¹Œì§€ ê°€ì„œ ëˆˆì¹˜ë¥¼ ì±„ê²Œ ë˜ì—ˆë‹¤...!! ì •ë§ ì¹˜ëª…ì ì¸ ì‹¤ìˆ˜ì˜€ë‹¤. ê·¸ë˜ì„œ BoardImgUrl ì—”í‹°í‹°ë¥¼ ë§Œë“¤ê³  ë‹¤ì‹œ ì„¤ê³„ë¥¼ í•˜ëŠ” ë¶ˆìƒì‚¬ê°€ ì¼ì–´ë‚¬ë‹¤.

  ```java
  @NoArgsConstructor
  @Getter
  @Entity
  public class BoardImgUrls {
      @Id
      @GeneratedValue(strategy = GenerationType.IDENTITY)
      @Column(name = "BOARDIMGURLS_ID")
      private Long id;
  
      @ManyToOne
      @JoinColumn(name = "BOARD_ID")
      private Board board;
  
      private String imgUrl;
  
      @Builder
      public BoardImgUrls(String imgUrl, Board board) {
          this.imgUrl = imgUrl;
          this.board = board;
      }
  
      public static Set<BoardImgCommonRequestDto> toDtoList(Set<BoardImgUrls> dtos) {
          Set<BoardImgCommonRequestDto> imgCommonRequestDtos = new HashSet<>();
          for (BoardImgUrls boardImgUrl : dtos) {
              imgCommonRequestDtos.add(new BoardImgCommonRequestDto(boardImgUrl));
          }
          return imgCommonRequestDtos;
      }
  }
  ```

### S3 ê²Œì‹œê¸€ ì‘ì„± ì´ë¯¸ì§€ ì—…ë¡œë“œ ì—ëŸ¬

- 1ì°¨ë°°í¬, Httpì¼ ë•ŒëŠ” ì´ìƒì´ ì—†ì—ˆë‹¤. -> 2ì°¨ë°°í¬, Https ì ìš©í•˜ê³  ë‚˜ì„œ ê²Œì‹œê¸€ ì‘ì„±ì‹œ Permission Errorê°€ ë°œìƒ.

- ë¸”ë¡œê·¸ì™€ ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ë‹ˆ S3ëŠ” Httpsë¥¼ ì§€ì›ì„ ì•ˆí•  ìˆ˜ ë„ ìˆë‹¤? ë¼ëŠ” ì˜ê²¬ì„ ë³´ê²Œë˜ì—ˆë‹¤. ê·¸ë˜ì„œ 1ì°¨ í•´ê²°ì±…ìœ¼ë¡œ AWS CLoudFrontë¡œ s3ë¥¼ ë°°í¬í•˜ê¸°ë¡œ í•´ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ ì‹¤íŒ¨ë¥¼ í•˜ì˜€ê³ , ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ì™€ ë¸”ë¡œê·¸, ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ë‹¤ê°€ ë‚˜ì™€ ë¹„ìŠ·í•œ ë¬¸ì œë¥¼ ê°€ì§„ ì‚¬ëŒì´ ìˆì—ˆë‹¤. 

  ```java
  private Optional<File[]> convert(List<MultipartFile> file) throws IOException {
          multiparts = new MultipartFile[file.size()];
          File[] convertFiles = new File[file.size()];
          for (int i=0; i<file.size(); i++) {
              multiparts[i] = file.get(i);
              convertFiles[i] = new File((file.get(i).getOriginalFilename()));
             if (!convertFiles[i].exists()) {
                log.info("íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€? : " + convertFiles[i].exists()+" ,"+convertFiles[i]);
                  convertFiles[i].mkdirs();
                  Runtime.getRuntime().exec("chmod 777 " + file.get(i).getOriginalFilename());
                  convertFiles[i].setExecutable(true, false);
                  convertFiles[i].setReadable(true, false);
                  convertFiles[i].setWritable(true, false);
                 if (!convertFiles[i].createNewFile()) {
                     log.debug("===========Optional.emty ê°€ ë‚˜ì˜´!!===========");
                      return Optional.empty();
                  }else {
                      try(FileOutputStream fos = new FileOutputStream(convertFiles[i])) {
                          fos.write(file.get(i).getBytes());
                      }
                  }
              }
          }
          return Optional.of(convertFiles);
      }
  ```

  ì´ëŸ°ì‹ì¸ë° ë°°í¬ë¥¼ Linuxí™˜ê²½ì—ì„œ Multipartë¥¼ Fileë¡œ ë³€í™˜ì„ í•˜ë ¤ë©´ ê¶Œí•œì´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì ì„ ê¹¨ë‹¬ì•˜ë‹¤! ê·¸ë˜ì„œ ê¶Œí•œì„ ì£¼ë©´ì„œ Fileì„ ë§Œë“¤ì–´ ë³´ì•˜ì§€ë§Œ ë¶€ë¶„ì ìœ¼ë¡œ í•´ê²°ì€ í–ˆì§€ë§Œ ê²°ë¡ ì ì¸ í•´ê²° x 

  - 2ì°¨ í•´ê²°ë°©ì•ˆ : ë¸”ë¡œê·¸ë¥¼ ë³´ë‹¤ë³´ë‹ˆ êµ³ì´ Multipart -> Fileë¡œ ì•ˆí•˜ê³  ë°”ë¡œ Multipartë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤ëŠ” ê²ƒì´ë‹¤!!... ë¶„ëª…íˆ.. ì•ˆëœë‹¤ê³  ë¸”ë¡œê·¸ì—ì„œ ë´¤ì—ˆëŠ”ë°.. ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ë‹¤. 

    ```java
    public List<String> boardUpload(List<MultipartFile> multipartFile, String dirName) throws IOException {
            String[] result = changeUploadFileName(multipartFile, dirName);
            return Arrays.asList(result);
        }
    ```

    ê·¸ëƒ¥ ë‹¤ì´ë ‰íŠ¸ë¡œ Multipartë¥¼ ì‚¬ìš©í•´ë„ ë¬¸ì œê°€ ì—†ì—ˆë˜ê²ƒì´ë‹¤!!




